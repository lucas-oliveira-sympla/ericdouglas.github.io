<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="image source TL;DR. Elixir has an amazing built-in feature that let’s you test code inside the documentation. You don’t need to install any tool to write your tests, it’s built-in in the language! Eli">
<meta name="keywords" content="elixir,testing,documentation">
<meta property="og:type" content="article">
<meta property="og:title" content="Elixir&#39;s built-in documentation and testing Tools">
<meta property="og:url" content="http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/index.html">
<meta property="og:site_name" content="Eric Douglas">
<meta property="og:description" content="image source TL;DR. Elixir has an amazing built-in feature that let’s you test code inside the documentation. You don’t need to install any tool to write your tests, it’s built-in in the language! Eli">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://i.imgur.com/6b4GmhV.jpg">
<meta property="og:updated_time" content="2017-08-28T11:25:03.449Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Elixir&#39;s built-in documentation and testing Tools">
<meta name="twitter:description" content="image source TL;DR. Elixir has an amazing built-in feature that let’s you test code inside the documentation. You don’t need to install any tool to write your tests, it’s built-in in the language! Eli">
<meta name="twitter:image" content="http://i.imgur.com/6b4GmhV.jpg">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Elixir&#39;s built-in documentation and testing Tools</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
      <link rel="alternate" href="/atom.xml" title="Eric Douglas" type="application/atom+xml" />
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/ericdouglas">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2017/09/03/writing-a-csv-todo-app-with-elixir-part-1-3/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2017/08/24/practicing-the-elixir-language/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&text=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&title=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&is_video=false&description=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Elixir&#39;s built-in documentation and testing Tools&body=Check out this article: http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&title=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&title=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&title=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&title=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&name=Elixir&#39;s built-in documentation and testing Tools&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#TL-DR"><span class="toc-number">1.</span> <span class="toc-text">TL;DR.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Specification"><span class="toc-number">2.</span> <span class="toc-text">Specification</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Creating-the-project"><span class="toc-number">3.</span> <span class="toc-text">Creating the project</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing-ExDoc"><span class="toc-number">4.</span> <span class="toc-text">Installing ExDoc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Writing-the-tests"><span class="toc-number">5.</span> <span class="toc-text">Writing the tests</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Writing-the-module"><span class="toc-number">6.</span> <span class="toc-text">Writing the module</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Documentation-and-doctests"><span class="toc-number">7.</span> <span class="toc-text">Documentation and doctests</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Generating-the-documentation-page"><span class="toc-number">8.</span> <span class="toc-text">Generating the documentation page</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Elixir&#39;s built-in documentation and testing Tools
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Eric Douglas</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-08-27T21:27:48.000Z" itemprop="datePublished">2017-08-27</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/documentation/">documentation</a>, <a class="tag-link" href="/tags/elixir/">elixir</a>, <a class="tag-link" href="/tags/testing/">testing</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p><img src="http://i.imgur.com/6b4GmhV.jpg" alt="car in a wind tunnel testing"><br><a href="https://www.carthrottle.com/post/n43v9xq/" target="_blank" rel="external">image source</a></p>
<h2 id="TL-DR"><a href="#TL-DR" class="headerlink" title="TL;DR."></a>TL;DR.</h2><ul>
<li>Elixir has an amazing built-in feature that let’s you test code inside the documentation.</li>
<li>You don’t need to install any tool to write your tests, it’s built-in in the language!</li>
<li>Elixir has an official dependency that generates a beautiful HTML page for your docs.</li>
</ul>
<hr>
<p>One of the first and most impressive characteristics I saw when I started to study Elixir was the powerful yet simple built-in tools to help developers write documentation and tests.</p>
<p>A very special feature is the called <code>doctest</code>, which is a test that lives inside your documentation. With such tests, you can assure your docs are up-to-date, because whenever you run your tests, the tests inside your documentation will also be verified. <strong>Really awesome</strong>!</p>
<p>In this article I’ll show you how to write a simple program with unit tests and how to document your code and generate a beautiful HTML documentation page.</p>
<p>Let’s start!</p>
<blockquote>
<p>You can see the source code <a href="https://github.com/ericdouglas/staircase" target="_blank" rel="external">here</a>.</p>
</blockquote>
<h2 id="Specification"><a href="#Specification" class="headerlink" title="Specification"></a>Specification</h2><p>Our program should implement the solution for the <a href="https://www.hackerrank.com/challenges/staircase" target="_blank" rel="external">staircase problem</a>.</p>
<p>The program will receive a positive number <code>n</code> and should print a staircase right-aligned composed of <code>#</code> symbols and spaces, with a height and width equals to <code>n</code>.</p>
<p>Example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">input &gt; 6</div><div class="line">output &gt;</div><div class="line">     #</div><div class="line">    ##</div><div class="line">   ###</div><div class="line">  ####</div><div class="line"> #####</div><div class="line">######</div></pre></td></tr></table></figure>
<h2 id="Creating-the-project"><a href="#Creating-the-project" class="headerlink" title="Creating the project"></a>Creating the project</h2><p>To create the project, type the following command in your terminal:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mix new staircase</div></pre></td></tr></table></figure>
<p>With the structure generated by mix we already can write our program and our test files. Let’s now install the <a href="https://github.com/elixir-lang/ex_doc" target="_blank" rel="external">ExDoc</a> library that will generate the HTML documentation page for us.</p>
<h2 id="Installing-ExDoc"><a href="#Installing-ExDoc" class="headerlink" title="Installing ExDoc"></a>Installing ExDoc</h2><p>Go to <code>mix.exs</code> file and add the following line inside the <code>deps</code> function:</p>
<figure class="highlight elixir"><figcaption><span>mix.exs</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">defp</span> <span class="title">deps</span></span> <span class="keyword">do</span></div><div class="line">  [</div><div class="line">    &#123;<span class="symbol">:ex_doc</span>, <span class="string">"~&gt; 0.16"</span>&#125;</div><div class="line">  ]</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Now all you need to do is run the command <code>mix deps.get</code> to install the dependency.</p>
<h2 id="Writing-the-tests"><a href="#Writing-the-tests" class="headerlink" title="Writing the tests"></a>Writing the tests</h2><p>First we’ll write some tests so we’ll be able to easily verify if our solution is actually satisfying our specs.</p>
<p>To do this, go to the already created file inside the <code>test</code> folder <code>staircase_test.exs</code>.</p>
<blockquote>
<p>All test files end up with the <code>.exs</code> extension. The difference between <code>.ex</code> and <code>.exs</code> is that files with the <code>.exs</code> won’t be compiled, they’re <em>Elixir scripts</em>.</p>
</blockquote>
<p>Let’s remove the original test case and add our assertions there:</p>
<figure class="highlight elixir"><figcaption><span>test/staircase_test.exs</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">defmodule</span> <span class="title">StaircaseTest</span></span> <span class="keyword">do</span></div><div class="line">  <span class="keyword">use</span> ExUnit.Case</div><div class="line">  import ExUnit.CaptureIO</div><div class="line">  doctest Staircase</div><div class="line"></div><div class="line">  test <span class="string">"if staircases have the right size"</span> <span class="keyword">do</span></div><div class="line">    assert capture_io(<span class="keyword">fn</span> -&gt; Staircase.main(<span class="number">1</span>) <span class="keyword">end</span>) == <span class="string">"#\n"</span></div><div class="line"></div><div class="line">    assert capture_io(<span class="keyword">fn</span> -&gt; Staircase.main(<span class="number">2</span>) <span class="keyword">end</span>) ==</div><div class="line"><span class="string">" #</span></div><div class="line"><span class="string">##\n"</span></div><div class="line"></div><div class="line">    assert capture_io(<span class="keyword">fn</span> -&gt; Staircase.main(<span class="number">3</span>) <span class="keyword">end</span>) ==</div><div class="line"><span class="string">"  #</span></div><div class="line"><span class="string"> ##</span></div><div class="line"><span class="string">###\n"</span></div><div class="line"></div><div class="line">    assert capture_io(<span class="keyword">fn</span> -&gt; Staircase.main(<span class="number">7</span>) <span class="keyword">end</span>) ==</div><div class="line"><span class="string">"      #</span></div><div class="line"><span class="string">     ##</span></div><div class="line"><span class="string">    ###</span></div><div class="line"><span class="string">   ####</span></div><div class="line"><span class="string">  #####</span></div><div class="line"><span class="string"> ######</span></div><div class="line"><span class="string">#######\n"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Don’t panic! Those tests have some interesting peculiarities and it’ll be a good opportunity to learn them. I know it’s looking a little ugly but I hope after the explanation you’ll be more comfortable with such assertions.</p>
<p>The first piece to note is the <code>import ExUnit.CaptureIO</code>. This module gives to us the ability to capture the output when a function prints something so we can make an assertion to that output. You can learn more about such module <a href="https://hexdocs.pm/ex_unit/ExUnit.CaptureIO.html#content" target="_blank" rel="external">here</a>.</p>
<p>Another interesting part is the <code>doctest Staircase</code>. This tells that we will run the tests inside the documentation of the module <code>Staircase</code> together with this suit of tests.</p>
<p>Inside our <code>test</code> case, we can see that the <code>capture_io</code> function, from the <code>ExUnit.CaptureIO</code> module, receives an anonymous function (<code>fn -&gt; end</code>). This is how that function works: you should pass an anonymous functions to it so it’ll be called later. Check the documentation linked before to see more ways to use this function.</p>
<p>To finish the explanation of our tests, the string representing the output was written in the line below of our assertion because in that way the spaces before each line wouldn’t mess/broke our assertion and it’s more intuitive to see the final result.</p>
<p>You can see though that Elixir allows us to write strings in multiple lines.</p>
<h2 id="Writing-the-module"><a href="#Writing-the-module" class="headerlink" title="Writing the module"></a>Writing the module</h2><p>Breaking the specification more granularly, we have to:</p>
<ol>
<li>Receive an integer corresponding to the size <code>n</code> of the staircase</li>
<li>Generate a string with an arbitrary size containing spaces</li>
<li>Generate a string with an arbitrary size containing <code>#</code> characters</li>
<li>Generate a row appending the <em>space</em> string and the <em>char</em> string</li>
<li>A row should be made of <code>n</code> characters, counting spaces and <code>#</code></li>
<li>Print such row</li>
</ol>
<p>A possible solution to accomplish such task could be:</p>
<ol>
<li>Create a module <code>Staircase</code></li>
<li>Create a <code>main</code> function to receive the input and print each row to the output</li>
<li>Create a function to generate a string of an arbitrary size composed with an arbitrary char</li>
<li>Append the string made with spaces and the string made with <code>#</code></li>
<li>Print the final string</li>
</ol>
<p>Here is my solution for such task. Such code should be copied to the <code>staircase.ex</code> file, inside the <code>lib</code> folder.</p>
<figure class="highlight elixir"><figcaption><span>lib/staircase.ex</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">defmodule</span> <span class="title">Staircase</span></span> <span class="keyword">do</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(size) <span class="keyword">do</span></div><div class="line">    Enum.each(<span class="number">1</span>..size, <span class="keyword">fn</span> i -&gt;</div><div class="line">      IO.puts(string_gen(size - i, <span class="string">" "</span>) &lt;&gt; string_gen(i, <span class="string">"#"</span>))</div><div class="line">    <span class="keyword">end</span>)</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">string_gen</span></span>(<span class="number">0</span>, <span class="number">_</span>), <span class="symbol">do:</span> <span class="string">""</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">string_gen</span></span>(size, char) <span class="keyword">when</span> size &gt; <span class="number">0</span> <span class="keyword">do</span></div><div class="line">    Enum.reduce(<span class="number">1</span>..size, <span class="string">""</span>, <span class="keyword">fn</span>(_i, acc) -&gt; acc &lt;&gt; char <span class="keyword">end</span>)</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Now that we have our final solution, let’s run our tests to see if it’s working fine.</p>
<p>Typing <code>mix test</code> in your terminal you should see the following message:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt; mix test</div><div class="line">.</div><div class="line"></div><div class="line">Finished in 0.03 seconds</div><div class="line">1 test, 0 failures</div><div class="line"></div><div class="line">Randomized with seed 477889</div></pre></td></tr></table></figure>
<p><strong>Great</strong>! Now we are almost done. Let’s finish writing some documentation and the most exciting part, the doctests :)</p>
<h2 id="Documentation-and-doctests"><a href="#Documentation-and-doctests" class="headerlink" title="Documentation and doctests"></a>Documentation and doctests</h2><p>From the Elixir docs:</p>
<blockquote>
<p>Elixir treats documentation as a first-class citizen. This means documentation should be easy to write and easy to read.</p>
</blockquote>
<p>We can easily confirm this statement. Elixir gives to us the module attributes <code>@moduledoc</code> and <code>@doc</code> so we can write documentation for our modules and functions. You can write in markdown inside your documentation as well.</p>
<p>Let’s see it in practice.</p>
<p>In the <code>staircase.ex</code> file, below your module definition, let’s add a <code>@moduledoc</code>.</p>
<figure class="highlight elixir"><figcaption><span>lib/staircase.ex</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">defmodule</span> <span class="title">Staircase</span></span> <span class="keyword">do</span></div><div class="line">  <span class="variable">@moduledoc</span> <span class="string">""</span><span class="string">"</span></div><div class="line"><span class="string">  Generate staircases based on the input value</span></div><div class="line"><span class="string">  "</span><span class="string">""</span></div><div class="line"></div><div class="line">  <span class="comment"># ...</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Now let’s describe what our <code>main</code> function does:</p>
<figure class="highlight elixir"><figcaption><span>lib/staircase.ex</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="variable">@doc</span> <span class="string">""</span><span class="string">"</span></div><div class="line"><span class="string">Receives the input and print the staircase to the console</span></div><div class="line"><span class="string">"</span><span class="string">""</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(size) <span class="keyword">do</span></div><div class="line">  Enum.each(<span class="number">1</span>..size, <span class="keyword">fn</span> i -&gt;</div><div class="line">    IO.puts(string_gen(size - i, <span class="string">" "</span>) &lt;&gt; string_gen(i, <span class="string">"#"</span>))</div><div class="line">  <span class="keyword">end</span>)</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>And finally, let’s describe what our <code>string_gen</code> function does and write some tests inside our documentation!</p>
<figure class="highlight elixir"><figcaption><span>lib/staircase.ex</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="variable">@doc</span> <span class="string">""</span><span class="string">"</span></div><div class="line"><span class="string">Generate a string of size `size` made with characters `char`</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">## Example</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">    iex&gt; Staircase.string_gen(0, "</span><span class="comment">#")</span></div><div class="line">    <span class="string">""</span></div><div class="line"></div><div class="line">    iex&gt; Staircase.string_gen(<span class="number">1</span>, <span class="string">"#"</span>)</div><div class="line">    <span class="string">"#"</span></div><div class="line"></div><div class="line">    iex&gt; Staircase.string_gen(<span class="number">7</span>, <span class="string">"#"</span>)</div><div class="line">    <span class="string">"#######"</span></div><div class="line"></div><div class="line">    iex&gt; Staircase.string_gen(<span class="number">0</span>, <span class="string">" "</span>)</div><div class="line">    <span class="string">""</span></div><div class="line"></div><div class="line">    iex&gt; Staircase.string_gen(<span class="number">1</span>, <span class="string">" "</span>)</div><div class="line">    <span class="string">" "</span></div><div class="line"></div><div class="line">    iex&gt; Staircase.string_gen(<span class="number">7</span>, <span class="string">" "</span>)</div><div class="line">    <span class="string">"       "</span></div><div class="line"><span class="string">""</span><span class="string">"</span></div><div class="line"><span class="string">def string_gen(0, _), do: "</span><span class="string">"</span></div><div class="line"><span class="string">def string_gen(size, char) when size &gt; 0 do</span></div><div class="line"><span class="string">  Enum.reduce(1..size, "</span><span class="string">", fn(_i, acc) -&gt; acc &lt;&gt; char end)</span></div><div class="line"><span class="string">end</span></div></pre></td></tr></table></figure>
<p>This last part receives our attention. In order to write code that will be evaluated when you run your tests, you have to put inside your <code>@doc</code> the <code>## Example</code> part exactly in the way it was done here:</p>
<ol>
<li>Add <code>## Example</code></li>
<li>Skip a line</li>
<li>Add 4 spaces considering the column where <code>## Example</code> started</li>
<li>Add <code>iex&gt;</code> and the function/code that will be tested</li>
<li>Write what is the expected return of such function in the line below</li>
</ol>
<p>Let’s run <code>mix test</code> so you can see we have now <strong>7 tests</strong>. Pretty cool!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; mix test</div><div class="line">Compiling 1 file (.ex)</div><div class="line">.......</div><div class="line"></div><div class="line">Finished in 0.07 seconds</div><div class="line">7 tests, 0 failures</div><div class="line"></div><div class="line">Randomized with seed 70528</div></pre></td></tr></table></figure>
<p>Changing the second assertion to intentionally break the test we can see how helpful and smart ExUnit is.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">  1) test doc at Staircase.string_gen/2 (2) (StaircaseTest)</div><div class="line">     test/staircase_test.exs:4</div><div class="line">     Doctest failed</div><div class="line">     code: Staircase.string_gen(1, &quot;#&quot;) === &quot;&amp;&quot;</div><div class="line">     left: &quot;#&quot;</div><div class="line">     stacktrace:</div><div class="line">       lib/staircase.ex:23: Staircase (module)</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">Finished in 0.07 seconds</div><div class="line">7 tests, 1 failure</div></pre></td></tr></table></figure>
<p>It tells exactly what and where the problem is. Amazing stuff, serious.</p>
<h2 id="Generating-the-documentation-page"><a href="#Generating-the-documentation-page" class="headerlink" title="Generating the documentation page"></a>Generating the documentation page</h2><p>Our final step is to generate our beautiful documentation page using the ExDoc tool we installed in the beginning of the article.</p>
<p>It’s extremely easy to do so, just run <code>mix docs</code> and you’re done!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; mix docs</div><div class="line">Compiling 1 file (.ex)</div><div class="line">Docs successfully generated.</div><div class="line">View them at &quot;doc/index.html&quot;.</div></pre></td></tr></table></figure>
<p>Go to <code>doc/index.html</code> and open the file in your favorite browser to navigate in your docs!</p>
<p><strong>OBS</strong>: you can activate the night mode in the end of the page clicking in “Switch to night mode”.</p>
<blockquote>
<p>If you want some tips on how to learn Elixir or any other programming language, <a href="https://ericdouglas.github.io/2017/08/24/practicing-the-elixir-language/">this article</a> can be helpful.</p>
</blockquote>
<p>That’s it! I hope you enjoyed that simple demonstration of the helpful features Elixir brings to us for free.</p>
<blockquote>
<p>Until next ;D</p>
</blockquote>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/ericdouglas">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#TL-DR"><span class="toc-number">1.</span> <span class="toc-text">TL;DR.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Specification"><span class="toc-number">2.</span> <span class="toc-text">Specification</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Creating-the-project"><span class="toc-number">3.</span> <span class="toc-text">Creating the project</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing-ExDoc"><span class="toc-number">4.</span> <span class="toc-text">Installing ExDoc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Writing-the-tests"><span class="toc-number">5.</span> <span class="toc-text">Writing the tests</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Writing-the-module"><span class="toc-number">6.</span> <span class="toc-text">Writing the module</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Documentation-and-doctests"><span class="toc-number">7.</span> <span class="toc-text">Documentation and doctests</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Generating-the-documentation-page"><span class="toc-number">8.</span> <span class="toc-text">Generating the documentation page</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&text=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&title=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&is_video=false&description=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Elixir&#39;s built-in documentation and testing Tools&body=Check out this article: http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&title=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&title=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&title=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&title=Elixir&#39;s built-in documentation and testing Tools"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/&name=Elixir&#39;s built-in documentation and testing Tools&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 Eric Douglas
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/ericdouglas">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-48165601-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'ericdouglas';
        var disqus_url = 'http://ericdouglas.github.io/2017/08/27/elixir-built-in-documentation-and-testing-tools/';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


